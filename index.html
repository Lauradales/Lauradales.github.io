<html>
<head><title>cars spa</title>
</head><body>

<!DOCTYPE html>
<html><head><title>cars too</title>
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
 <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
 
 <script src="https://unpkg.com/vue@next"></script>
<style>

</style>
</head>
<body>

<nav class="navbar navbar-inverse">
<div class="container-fluid">
    <div class="navbar-header">
        <a class="navbar-brand" href="#">Our Website</a>
    </div>
    <div>
       <ul class="nav navbar-nav">
           <li class="active"><a id="menu1" href="/">Home</a></li>
           <li><a id="menu3" href="edit.html" >Edit Car Data</a></li>
		   <!-- <li><a id="menu5" href="#" onclick="deleteCar();return false;">Delete Car</a></li> -->
       </ul>
    </div>
</div>
</nav>    <!-- end nav-bar -->

<div class="container">
<h3>Cars 4 Sale</h3>
<div id = "carsApp">     <!-- vue.js mounting location  -->

	<div style='padding: 5px;'>    
        <select  v-on:change="getData()" v-model='filter'>
            <option value='all'>Get All Cars</option>
			<option value='BMW'>BMWs</option>
			<option value='Chevy'>Chevys</option>
			<option value='Dodge'>Dodges</option>
            <option value='Ford'>Fords</option>
			<option value='Honda'>Hondas</option>
			<option value='Jeep'>Jeeps</option>
			<option value='Toyota'>Toyotas</option>
			<option value='Volkswagen'>Volkswagens</option> 
        </select> Select a Filter Option
    </div>

   
      <div v-show="showTable">
         <h2>Cars</h2>
         <table class="table table-bordered table-striped">
            <tr>
                <th>year</th>
                <th>make</th>
                <th>model</th>
                <th>miles</th>
				<th>color</th>
                <th>price</th>
                <th>seller</th>
            </tr>
            <tr v-for = "car in auto_list">
                <td>{{car.year}}</td>
                <td>{{car.make}}</td>
                <td>{{car.model}}</td>
                <td>{{car.miles}}</td>
                <td>{{car.color}}</td>
                <td>{{car.price}}</td>
                <td>{{car.seller_id}}</td>
            </tr>
       </table>
      </div>
       
   </div>   <!-- end carsApp -->


   

</div>   <!-- end class= 'container' -->

<script>

   let app = Vue.createApp({
      data() {     // returns an object of data
         return {
            auto_list: [],           // array to hold student data
            filter: '',
            showTable: false,
         }
      },
      methods: {    
         async getData() {         // ajax request
            this.showTable = true
            
			   url = '/getCars?filter=' + this.filter
            const response = await fetch(url)
            this.auto_list = await response.json()
         },
      }
   })
         
   app.mount('#carsApp')   //in which div to mount the vue app
   
   </script>

<!-- <script src='/js/app.js'></script> -->  <!-- our app.js code  -->

</body></html>
